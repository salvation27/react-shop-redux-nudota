import React, { Component } from 'react'
import {connect} from 'react-redux'
import * as R from 'ramda'

import {fetchPhoneById} from 'actions'
import {getPhoneById} from 'selectors'

class Phone extends Component {

  componentDidMount(){
   this.props.fetchPhoneById(this.props.match.params.id) 
  }

  


  renderContent (){
    const {phone} = this.props
    return (
      <div className='thumbnail'>
        <div className="row">
          <div className="col-md-6">
            <img 
            className='img-thumbnail' 
            src={phone.image} alt=""/>
          </div>
          <div className="col-md-6">
            <h4>Параметры</h4>
             <p><strong>cpu: </strong>{phone.cpu}</p>
             <p><strong>camera: </strong>{phone.camera}</p>
             <p><strong>size: </strong>{phone.size}</p>
             <p><strong>weight: </strong>{phone.weight}</p>
             <p><strong>display: </strong>{phone.display}</p>
             <p><strong>battery: </strong>{phone.battery}</p>
             <p><strong>memory: </strong>{phone.memory}</p>
            
          </div>
        </div>
        <div className="caption-full">
           <h4 className='pull-right'>${phone.price}</h4>
           <h4>${phone.name}</h4>
           <p>{phone.description}</p>
        </div>
      </div>
    )
  }

  renderSidebar (){
    return (
      <div>Сайтбар</div>
    )
  }

  render() {
    const {phone} = this.props
    
    return (
      <div className='view-container'>
        <div className="container">
          <div className="row">
            <div className="col-md-9">
              {phone && this.renderContent()}
            </div>
            <div className="col-md-3">
            {phone && this.renderSidebar()}
            </div>
          </div>
        </div>
      </div>
    )
  }
}

const mapDispatchToProps =  {
  fetchPhoneById
}
const mapStateToProps = (state)=>{
   return {
     phone:getPhoneById(state,state.phonePage.id)
   }
}

export default connect(mapStateToProps,mapDispatchToProps) (Phone)
